---
layout: default
---
<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>
<script src="http://jabtunes.com/labs/boidsnbuildings/Director.js"></script>

<audio id="music">
  <source src="https://christiaanconover.com/wp-content/uploads/2011/05/THX-DVD.mp3">
</audio>
<div id="blackout" style="position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:7"></div>

<style>
  #case-study-tti {
    position: relative;
    padding: 2.5em 0 0;
    background: url(/assets/patterns/orange_tris.svg) no-repeat;
    background-size: cover;
    background-position: 0 -200px;
  }

  #case-study-tti h2 {
    font-size: 22px;
    font-weight: 300;
    color: #fff;
    opacity: 0.7;
  }

  #case-study-tti .stages {
    font-size: 25px;
    font-weight: 300;
    color: #fff;
    opacity: 0.7;
    padding-bottom: 2em;
  }

  #case-study-tti blockquote {
    border-color: rgba(255,255,255,0.3);
    border-width: 3px;
    font-style: italic;
    font-weight: 300;
    background: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.7);
    padding: 1em;
  }

  #case-study-tti blockquote footer {
    color: white;
    padding: 0.5em;
    opacity: 0.7;
  }


  a.moar {
    display: block;
    background: rgba(255,255,255,0.3);
    padding: 1em;
    text-align: center;
    color: #111;
  }

  .x {
    background-image: url(/assets/patterns/blue_tris.svg) !important;
  }
  #content{ top: 0; transition: top 0.5s; }
  #spacer{ height: 68vh; transition: height 0.5s; }

  @media all and (max-height: 600px) {
    #spacer { height: 0;}
  }


  #content.out {
    top: -200px;
  }
  #spacer.out {
    height: 200vh;
  }
</style>


<div id="content" style="z-index: 10; position:relative;" class="out">
  <div style="background: #333">
    <div class="container">
      <div style="padding: 1em 0;text-align:center">
        <a href="/">
          <img src="/assets/logo_white.svg" alt="Trilane" class="logo" style="width:100px;"/>
        </a>
      </div>
    </div>
  </div>

  <div id="spacer" class="out">&nbsp;</div>

  <a href="/case-studies/fm" class="blandlink">
    <div id="case-study-tti">
      <div class="container">
        <div class="row">
          <div class="col-md-6 stages">
            Vertrauen Sie nicht auf unser Wort, sondern auf das unserer Kunden.
          </div>
          <div class="col-md-2 col-md-offset-2">
            <a href="#moar" class="moar">Weiterlesen ↓</a>
          </div>
        </div>

        <div class="row" style="padding-bottom:2em">
          <div class="col-md-8">
            <blockquote>Das Team von Trilane steht nicht nur für exzellente Umsetzung, sondern darüber hinaus für kompetente
              und ehrliche Beratung. Uns ist klar: für eine Anwendung, mit der alle Seiten zufrieden sind,
              ist die von Trilane geleitete Planungsphase ebenso wichtig wie die Implementierung.
              <footer>Peter Heinke, Geschäftsführer der TTI GmbH</footer>
            </blockquote>
          </div>
          <div class="col-md-4">
            <img src="http://www.jemisonmetals.com/assets/Pete-Heinke3-5d92a7530113625f47bbd2e3e9b759d0.jpg" style="width:50%">
          </div>
        </div>
      </div>
    </div>
  </a>

  <div class="container" style="padding-top:1em;line-height:180%">
    <div class="row">
      <div class="col-md-4">
        <h2>Das Projekt</h2>
        <p>Die TTI GmbH ist Technologiezentrum und Gründerwerkstatt unter einem Dach vereint. In enger Zusammenarbeit mit der Universität Stuttgart
          wird hier Absolventen und jungen Gründern das Rüstzeug für die erfolgreiche Firmengründung vermittelt.</p>
      </div>
      <div class="col-md-4 col-md-offset-2">
        <h2>Der Kunde</h2>
        <p>Die TTI GmbH ist Technologiezentrum und Gründerwerkstatt unter einem Dach. In enger Zusammenarbeit mit der Universität Stuttgart
          wird hier Absolventen und jungen Gründern das Rüstzeug für die erfolgreiche Firmengründung vermittelt.</p>
      </div>
    </div>

</div>

<script>
  data = {"rooms":[{"din_category":"hnf","polygon":"457,292,456,292,456,291,456,291,457,291,457,274,455,274,435,274,435,291,448,291,448,292,448,292,435,292,435,306,436,306,436,307,436,307,435,307,435,324,446,324,446,307,445,307,445,306,445,306,448,306,448,307,448,307,447,307,447,324,457,324,457,307,456,307,456,306,456,306,457,306","floor_id":20},{"din_category":"hnf","polygon":"431,292,419,292,419,291,419,291,431,291,431,274,411,274,409,274,409,291,410,291,410,292,410,292,409,292,409,312,410,312,410,313,410,313,409,313,409,324,431,324,431,313,419,313,419,312,419,312,431,312","floor_id":20},{"din_category":"hnf","polygon":"669,257,655,257,649,257,649,285,669,285","floor_id":20},{"din_category":"hnf","polygon":"697,257,692,257,671,257,671,285,697,285","floor_id":20},{"din_category":"hnf","polygon":"807,83,781,83,721,83,721,118,758,118,781,118,803,118,803,116,804,116,804,114,807,114","floor_id":20},{"din_category":"hnf","polygon":"830,117,809,117,809,120,807,120,807,120,803,120,803,119,781,119,770,119,770,132,770,141,770,167,803,167,803,164,807,164,807,165,809,165,809,167,830,167","floor_id":20},{"din_category":"hnf","polygon":"807,50,804,50,804,48,803,48,803,44,804,44,804,42,807,42,807,33,797,33,797,36,795,36,795,36,791,36,791,36,789,36,789,33,770,33,770,59,770,69,770,82,781,82,807,82","floor_id":20},{"din_category":"hnf","polygon":"769,33,734,33,734,59,734,69,734,82,769,82,769,69,769,59","floor_id":20},{"din_category":"hnf","polygon":"733,33,713,33,713,36,711,36,711,36,707,36,707,36,705,36,705,33,698,33,698,82,699,82,733,82,733,69,733,59","floor_id":20},{"din_category":"hnf","polygon":"720,83,699,83,698,83,698,87,698,96,698,100,698,109,698,114,700,114,700,118,700,138,720,138","floor_id":20},{"din_category":"hnf","polygon":"720,148,720,138,700,138,700,151,700,153,700,153,700,183,720,183,720,183,720,183,720,167,720,163,720,163,720,157","floor_id":20},{"din_category":"hnf","polygon":"769,141,769,132,769,119,758,119,721,119,721,148,721,157,721,163,721,167,732,167,757,167,769,167","floor_id":20},{"din_category":"hnf","polygon":"647,153,647,152,644,152,628,152,626,152,626,169,647,169","floor_id":20},{"din_category":"hnf","polygon":"553,115,518,115,518,116,518,147,518,169,551,169,551,164,553,164","floor_id":20},{"din_category":"hnf","polygon":"495,130,495,115,460,115,460,169,491,169,491,164,495,164,495,163,495,140","floor_id":20},{"din_category":"hnf","polygon":"480,93,479,93,470,93,446,93,446,33,465,33,465,36,467,36,467,36,471,36,471,36,473,36,473,33,480,33","floor_id":20},{"din_category":"hnf","polygon":"457,128,456,128,456,127,457,127,457,116,435,116,435,127,448,127,448,128,435,128,435,148,448,148,448,149,435,149,435,167,454,167,457,167,457,149,456,149,456,148,457,148","floor_id":20},{"din_category":"hnf","polygon":"431,134,430,134,430,133,431,133,431,116,421,116,421,133,422,133,422,134,419,134,419,133,420,133,420,116,409,116,409,133,410,133,410,134,409,134,409,148,410,148,410,149,409,149,409,167,413,167,431,167,431,149,419,149,419,148,431,148","floor_id":20},{"din_category":"hnf","polygon":"697,33,650,33,650,98,650,98,659,98,697,98,697,96,697,87","floor_id":20},{"din_category":"hnf","polygon":"697,100,697,99,673,99,673,114,697,114,697,109","floor_id":20},{"din_category":"hnf","polygon":"672,99,659,99,650,99,650,99,650,100,650,109,650,114,650,114,672,114","floor_id":20},{"din_category":"hnf","polygon":"697,118,697,117,686,117,686,119,685,119,685,117,675,117,675,133,685,133,685,128,686,128,686,133,697,133","floor_id":20},{"din_category":"hnf","polygon":"671,117,662,117,662,119,661,119,661,117,649,117,649,117,649,133,661,133,661,128,662,128,662,133,671,133","floor_id":20},{"din_category":"hnf","polygon":"671,137,662,137,662,142,661,142,661,137,649,137,649,150,649,153,661,153,661,151,662,151,662,153,671,153","floor_id":20},{"din_category":"hnf","polygon":"697,137,686,137,686,142,685,142,685,137,675,137,675,153,685,153,685,151,686,151,686,153,697,153,697,151","floor_id":20},{"din_category":"hnf","polygon":"647,117,647,114,644,114,628,114,626,114,626,130,626,139,626,151,628,151,644,151,647,151,647,150","floor_id":20},{"din_category":"hnf","polygon":"625,130,625,119,554,119,554,164,555,164,555,169,611,169,611,164,615,164,615,169,625,169,625,139","floor_id":20},{"din_category":"hnf","polygon":"649,33,641,33,641,36,639,36,639,36,635,36,635,36,633,36,633,33,614,33,614,36,613,36,613,33,557,33,557,36,555,36,555,36,554,36,554,118,625,118,625,113,628,113,644,113,649,113,649,109,649,100,649,100,649,99,642,99,642,98,649,98","floor_id":20},{"din_category":"hnf","polygon":"445,33,410,33,410,93,434,93,443,93,445,93","floor_id":20},{"din_category":"hnf","polygon":"430,95,430,94,410,94,410,109,410,114,430,114,430,103","floor_id":20},{"din_category":"hnf","polygon":"407,169,375,169,375,164,373,164,373,151,367,151,367,110,374,110,385,110,409,110,409,114,407,114","floor_id":20},{"din_category":"hnf","polygon":"349,126,349,117,349,110,314,110,314,164,316,164,316,169,349,169","floor_id":20},{"din_category":"vf","polygon":"409,109,385,109,385,109,366,109,366,152,372,152,372,164,371,164,371,169,370,169,351,169,350,169,350,126,350,117,350,109,338,109,338,92,339,92,385,92,409,92","floor_id":20},{"din_category":"hnf","polygon":"337,91,339,91,373,91,373,33,317,33,317,36,315,36,315,36,314,36,314,109,337,109","floor_id":20},{"din_category":"hnf","polygon":"409,33,401,33,401,36,399,36,399,36,395,36,395,36,393,36,393,33,374,33,374,91,385,91,409,91","floor_id":20},{"din_category":"vf","polygon":"241,149,241,140,241,139,239,139,222,139,220,139,220,143,220,151,220,169,221,169,240,169,241,169","floor_id":20},{"din_category":"hnf","polygon":"313,125,241,125,241,138,220,138,220,114,193,114,193,93,230,93,230,36,231,36,231,36,233,36,233,33,309,33,309,36,311,36,311,36,313,36","floor_id":20},{"din_category":"hnf","polygon":"313,126,242,126,242,140,242,149,242,169,251,169,251,164,256,164,256,169,311,169,311,164,313,164","floor_id":20},{"din_category":"hnf","polygon":"218,118,218,116,206,116,206,119,205,119,205,116,195,116,195,133,205,133,205,128,206,128,206,133,218,133,218,126","floor_id":20},{"din_category":"hnf","polygon":"121,33,77,33,77,36,75,36,75,36,71,36,71,36,69,36,69,33,60,33,60,42,63,42,63,44,63,44,63,48,63,48,63,50,60,50,60,114,63,114,63,116,63,116,63,118,75,118,84,118,121,118,121,104,121,95","floor_id":20},{"din_category":"hnf","polygon":"169,33,161,33,161,36,159,36,159,36,155,36,155,36,153,36,153,33,122,33,122,92,153,92,162,92,169,92","floor_id":20},{"din_category":"hnf","polygon":"229,36,227,36,227,36,225,36,225,33,170,33,170,92,171,92,180,92,229,92","floor_id":20},{"din_category":"hnf","polygon":"192,93,180,93,171,93,162,93,153,93,122,93,122,95,122,104,122,118,134,118,143,118,147,118,147,139,167,139,167,126,167,118,167,114,192,114","floor_id":20},{"din_category":"hnf","polygon":"191,137,182,137,182,142,181,142,181,137,169,137,169,143,169,151,169,153,181,153,181,151,182,151,182,153,191,153","floor_id":20},{"din_category":"hnf","polygon":"167,153,167,153,167,151,167,143,167,140,147,140,147,147,147,157,147,164,147,167,147,183,167,183","floor_id":20},{"din_category":"hnf","polygon":"146,119,143,119,134,119,92,119,92,125,92,134,92,167,108,167,134,167,143,167,143,164,146,164,146,157,146,147","floor_id":20},{"din_category":"hnf","polygon":"91,134,91,125,91,119,84,119,75,119,63,119,63,120,59,120,59,120,57,120,57,117,37,117,37,166,57,166,57,164,59,164,59,164,63,164,63,167,91,167","floor_id":20},{"din_category":"hnf","polygon":"697,327,674,327,674,342,697,342,697,340,697,332","floor_id":20},{"din_category":"hnf","polygon":"697,308,686,308,686,313,685,313,685,308,675,308,675,324,685,324,685,322,686,322,686,324,697,324,697,323","floor_id":20},{"din_category":"hnf","polygon":"697,289,697,288,686,288,686,290,685,290,685,288,675,288,675,304,685,304,685,299,686,299,686,304,697,304","floor_id":20},{"din_category":"hnf","polygon":"720,258,700,258,700,275,720,275,720,272","floor_id":20},{"din_category":"hnf","polygon":"721,276,720,276,700,276,700,288,700,288,700,289,700,323,700,327,698,327,698,332,698,340,698,346,722,346,745,346,769,346,769,345,769,322,769,322,735,322,721,322","floor_id":20},{"din_category":"hnf","polygon":"769,273,758,273,732,273,724,273,724,276,722,276,722,321,734,321,734,314,735,314,735,321,769,321","floor_id":20},{"din_category":"hnf","polygon":"830,273,809,273,809,276,807,276,807,276,803,276,803,273,770,273,770,322,770,334,807,334,807,326,804,326,804,324,803,324,803,320,807,320,807,321,809,321,809,323,830,323","floor_id":20},{"din_category":"hnf","polygon":"807,335,770,335,770,345,770,408,789,408,789,405,791,405,791,404,795,404,795,405,797,405,797,408,807,408,807,398,804,398,804,396,803,396,803,392,804,392,804,390,807,390","floor_id":20},{"din_category":"hnf","polygon":"769,347,745,347,734,347,734,408,769,408","floor_id":20},{"din_category":"hnf","polygon":"733,347,722,347,698,347,698,384,698,393,698,408,705,408,705,405,707,405,707,404,711,404,711,405,713,405,713,408,733,408","floor_id":20},{"din_category":"hnf","polygon":"671,288,662,288,662,290,661,290,661,288,649,288,649,290,649,298,649,304,661,304,661,299,662,299,662,304,671,304","floor_id":20},{"din_category":"hnf","polygon":"671,308,662,308,662,313,661,313,661,308,649,308,649,315,649,323,649,324,661,324,661,322,662,322,662,324,671,324","floor_id":20},{"din_category":"hnf","polygon":"697,343,650,343,650,366,650,371,648,371,637,371,637,404,639,404,639,405,641,405,641,408,697,408,697,393,697,384","floor_id":20},{"din_category":"hnf","polygon":"481,272,460,272,460,272,460,318,464,318,481,318,481,313,481,304","floor_id":20},{"din_category":"hnf","polygon":"528,272,516,272,495,272,495,277,491,277,491,272,482,272,482,304,482,313,482,318,528,318,528,313,528,304","floor_id":20},{"din_category":"hnf","polygon":"553,277,551,277,551,272,529,272,529,304,529,313,529,318,553,318","floor_id":20},{"din_category":"hnf","polygon":"589,272,555,272,555,277,554,277,554,318,564,318,589,318,589,295","floor_id":20},{"din_category":"hnf","polygon":"625,277,625,272,615,272,615,277,611,277,611,272,590,272,590,295,590,318,625,318,625,295","floor_id":20},{"din_category":"hnf","polygon":"647,272,646,272,627,272,626,272,626,277,626,277,626,288,647,288","floor_id":20},{"din_category":"hnf","polygon":"647,315,647,298,647,290,647,289,626,289,626,295,626,334,626,347,626,366,626,370,648,370,649,370,649,366,649,332,649,327,647,327,647,323","floor_id":20},{"din_category":"hnf","polygon":"673,327,650,327,650,332,650,342,673,342","floor_id":20},{"din_category":"hnf","polygon":"636,371,590,371,590,408,633,408,633,405,635,405,635,404,636,404","floor_id":20},{"din_category":"hnf","polygon":"625,347,625,343,589,343,589,334,589,319,564,319,518,319,518,347,518,363,518,370,518,370,625,370,625,366","floor_id":20},{"din_category":"hnf","polygon":"625,319,590,319,590,334,590,342,625,342,625,334","floor_id":20},{"din_category":"hnf","polygon":"589,371,542,371,542,408,549,408,549,405,551,405,551,404,555,404,555,405,557,405,557,408,589,408","floor_id":20},{"din_category":"hnf","polygon":"541,371,518,371,506,371,506,408,541,408","floor_id":20},{"din_category":"hnf","polygon":"505,370,517,370,517,363,517,347,517,319,464,319,460,319,460,327,458,327,458,330,458,345,458,408,465,408,465,405,467,405,467,404,471,404,471,405,473,405,473,408,505,408","floor_id":20},{"din_category":"hnf","polygon":"457,345,457,330,457,327,410,327,410,408,457,408","floor_id":20},{"din_category":"hnf","polygon":"217,290,217,287,206,287,206,290,205,290,205,287,195,287,195,304,205,304,205,299,206,299,206,304,217,304,217,298","floor_id":20},{"din_category":"hnf","polygon":"217,315,217,308,206,308,206,313,205,313,205,308,195,308,195,324,205,324,205,321,206,321,206,324,217,324,217,323","floor_id":20},{"din_category":"hnf","polygon":"167,257,147,257,147,273,147,273,147,283,147,293,147,302,167,302,167,297,167,289,167,287,167,287","floor_id":20},{"din_category":"hnf","polygon":"191,287,182,287,182,290,181,290,181,287,170,287,170,289,170,297,170,304,181,304,181,299,182,299,182,304,191,304","floor_id":20},{"din_category":"hnf","polygon":"217,342,182,342,182,350,182,357,182,365,206,365,216,365,217,365","floor_id":20},{"din_category":"hnf","polygon":"217,332,217,326,194,326,194,341,217,341,217,340","floor_id":20},{"din_category":"hnf","polygon":"217,366,216,366,206,366,182,366,182,408,217,408,217,392,217,382","floor_id":20},{"din_category":"hnf","polygon":"241,276,241,276,241,272,240,272,220,272,220,272,220,288,223,288,239,288,241,288","floor_id":20},{"din_category":"hnf","polygon":"265,272,255,272,255,277,251,277,251,272,242,272,242,276,242,289,239,289,223,289,220,289,220,290,220,298,220,315,220,323,220,326,218,326,218,332,218,340,218,342,218,350,249,350,259,350,265,350,265,349,265,339","floor_id":20},{"din_category":"hnf","polygon":"265,351,259,351,249,351,218,351,218,382,218,392,218,408,225,408,225,405,227,405,227,404,231,404,231,405,233,405,233,408,265,408","floor_id":20},{"din_category":"hnf","polygon":"314,351,308,351,298,351,266,351,266,408,309,408,309,405,311,405,311,404,314,404","floor_id":20},{"din_category":"hnf","polygon":"314,339,314,334,308,334,298,334,266,334,266,339,266,349,266,350,298,350,308,350,314,350,314,348","floor_id":20},{"din_category":"hnf","polygon":"314,277,311,277,311,272,266,272,266,333,298,333,308,333,314,333","floor_id":20},{"din_category":"hnf","polygon":"349,272,315,272,315,277,315,277,315,333,329,333,339,333,349,333","floor_id":20},{"din_category":"hnf","polygon":"349,339,349,334,339,334,329,334,315,334,315,339,315,348,315,350,334,350,344,350,349,350,349,348","floor_id":20},{"din_category":"hnf","polygon":"349,351,344,351,334,351,315,351,315,404,315,405,317,405,317,408,349,408","floor_id":20},{"din_category":"hnf","polygon":"409,334,397,334,387,334,350,334,350,339,350,348,350,408,393,408,393,405,395,405,395,404,399,404,399,405,401,405,401,408,409,408","floor_id":20},{"din_category":"hnf","polygon":"407,272,375,272,375,277,371,277,371,272,350,272,350,333,387,333,397,333,409,333,409,327,407,327","floor_id":20},{"din_category":"hnf","polygon":"107,284,107,275,107,273,63,273,63,276,59,276,59,276,57,276,57,273,37,273,37,323,57,323,57,321,59,321,59,320,63,320,63,322,95,322,104,322,107,322","floor_id":20},{"din_category":"hnf","polygon":"146,293,146,283,146,276,143,276,143,273,134,273,108,273,108,275,108,284,108,322,146,322","floor_id":20},{"din_category":"hnf","polygon":"97,335,88,335,79,335,60,335,60,370,79,370,88,370,97,370","floor_id":20},{"din_category":"hnf","polygon":"97,371,88,371,79,371,60,371,60,390,63,390,63,392,63,392,63,396,63,396,63,398,60,398,60,408,69,408,69,405,71,405,71,404,75,404,75,405,77,405,77,408,97,408,97,400,97,391","floor_id":20},{"din_category":"hnf","polygon":"128,361,98,361,98,391,98,400,98,408,128,408","floor_id":20},{"din_category":"hnf","polygon":"181,357,181,350,181,342,169,342,169,340,169,331,169,326,167,326,167,322,167,314,167,303,147,303,147,323,104,323,95,323,63,323,63,324,63,324,63,326,60,326,60,334,79,334,88,334,98,334,98,360,128,360,128,408,153,408,153,405,155,405,155,404,159,404,159,405,161,405,161,408,181,408","floor_id":20},{"din_category":"hnf","polygon":"193,326,170,326,170,331,170,340,170,341,193,341","floor_id":20},{"din_category":"hnf","polygon":"191,116,182,116,182,119,181,119,181,116,169,116,169,118,169,126,169,133,181,133,181,128,182,128,182,133,191,133","floor_id":20},{"din_category":"hnf","polygon":"218,137,206,137,206,142,205,142,205,137,195,137,195,153,205,153,205,151,206,151,206,153,218,153,218,151,218,143","floor_id":20},{"din_category":"hnf","polygon":"191,308,182,308,182,313,181,313,181,308,170,308,170,314,170,322,170,324,181,324,181,321,182,321,182,324,191,324","floor_id":20},{"din_category":"vf","polygon":"220,187,220,169,647,169,647,187,700,187,700,184,720,184,720,190,721,190,721,250,720,250,720,257,700,257,700,254,647,254,625,238,625,202,613,190,441,190,433,198,425,190,253,190,241,202,241,238,253,250,425,250,433,242,441,250,613,250,625,238,647,254,647,271,220,271,220,253,167,253,167,256,147,256,147,249,146,249,146,190,147,190,147,184,167,184,167,187","floor_id":20},{"din_category":"vf","polygon":"496,169,517,169,517,115,496,115","floor_id":20},{"din_category":"hnf","polygon":"459,114,431,114,431,103,431,95,431,94,434,94,443,94,459,94","floor_id":20},{"din_category":"hnf","polygon":"516,93,515,93,506,93,481,93,481,33,516,33","floor_id":20},{"din_category":"hnf","polygon":"553,114,517,114,517,33,549,33,549,36,551,36,551,36,553,36","floor_id":20},{"din_category":"hnf","polygon":"516,114,460,114,460,94,516,94","floor_id":20},{"din_category":"nnf","polygon":"170,284,170,256,217,256,205,269,182,269,182,271,205,271,205,269,217,256,217,284","floor_id":19},{"din_category":"hnf","polygon":"126,244,145,244,145,196,126,196","floor_id":19},{"din_category":"vf","polygon":"220,187,220,169,647,169,647,187,720,187,720,190,721,190,721,250,720,250,720,258,720,258,720,271,700,271,700,254,647,254,647,271,220,271,220,253,167,253,167,271,147,271,147,249,145,249,145,190,147,190,147,187","floor_id":19},{"din_category":"hnf","polygon":"720,323,734,323,744,323,745,323,745,324,745,333,745,358,744,358,723,358,698,358,698,340,698,332,698,327,700,327,700,323,700,289,700,288,700,288,700,272,720,272,720,273,720,276,720,284,720,293","floor_id":19},{"din_category":"hnf","polygon":"769,305,769,315,769,322,744,322,734,322,721,322,721,293,721,284,721,276,724,276,724,273,732,273,758,273,769,273","floor_id":19},{"din_category":"hnf","polygon":"830,323,809,323,809,321,807,321,807,320,803,320,803,322,802,322,792,322,770,322,770,315,770,305,770,273,803,273,803,276,807,276,807,276,809,276,809,273,830,273","floor_id":19},{"din_category":"hnf","polygon":"807,358,802,358,793,358,746,358,746,333,746,324,746,323,792,323,802,323,803,323,803,324,804,324,804,326,807,326","floor_id":19},{"din_category":"hnf","polygon":"807,390,804,390,804,392,803,392,803,396,804,396,804,398,807,398,807,408,797,408,797,405,795,405,795,404,791,404,791,405,789,405,789,408,770,408,770,375,770,366,770,359,793,359,802,359,807,359","floor_id":19},{"din_category":"hnf","polygon":"769,408,734,408,734,359,744,359,769,359,769,366,769,375","floor_id":19},{"din_category":"hnf","polygon":"733,408,713,408,713,405,711,405,711,404,707,404,707,405,705,405,705,408,698,408,698,359,723,359,733,359","floor_id":19},{"din_category":"hnf","polygon":"529,332,529,341,529,343,553,343,553,404,551,404,551,405,549,405,549,408,473,408,473,405,471,405,471,404,470,404,470,342,460,342,460,341,460,332,460,327,460,272,491,272,491,277,495,277,495,272,529,272","floor_id":19},{"din_category":"hnf","polygon":"577,320,581,320,596,320,625,320,625,323,625,339,625,342,565,342,557,342,530,342,530,341,530,332,530,272,551,272,551,277,555,277,555,272,577,272","floor_id":19},{"din_category":"hnf","polygon":"625,319,596,319,581,319,578,319,578,272,611,272,611,277,615,277,615,272,625,272","floor_id":19},{"din_category":"hnf","polygon":"647,323,647,327,649,327,649,332,649,341,649,342,646,342,632,342,626,342,626,339,626,323,626,272,646,272,647,272,647,289","floor_id":19},{"din_category":"hnf","polygon":"649,363,649,368,648,368,640,373,638,374,638,404,635,404,635,405,633,405,633,408,602,408,602,404,602,378,602,369,602,343,632,343,646,343,649,343,649,354","floor_id":19},{"din_category":"hnf","polygon":"601,378,601,404,601,404,601,408,557,408,557,405,555,405,555,404,554,404,554,343,557,343,565,343,601,343,601,369","floor_id":19},{"din_category":"hnf","polygon":"697,408,641,408,641,405,639,405,639,404,639,375,641,374,649,369,650,368,697,368","floor_id":19},{"din_category":"hnf","polygon":"697,367,650,367,650,363,650,354,650,343,697,343,697,358","floor_id":19},{"din_category":"hnf","polygon":"673,342,650,342,650,341,650,332,650,327,673,327","floor_id":19},{"din_category":"hnf","polygon":"697,340,697,342,674,342,674,327,697,327,697,332","floor_id":19},{"din_category":"hnf","polygon":"697,323,697,324,686,324,686,322,685,322,685,324,675,324,675,308,685,308,685,313,686,313,686,308,697,308","floor_id":19},{"din_category":"hnf","polygon":"671,324,662,324,662,322,661,322,661,324,649,324,649,323,649,308,661,308,661,313,662,313,662,308,671,308","floor_id":19},{"din_category":"hnf","polygon":"671,304,662,304,662,299,661,299,661,304,649,304,649,289,649,288,661,288,661,290,662,290,662,288,671,288","floor_id":19},{"din_category":"hnf","polygon":"697,304,686,304,686,299,685,299,685,304,675,304,675,288,685,288,685,290,686,290,686,288,697,288,697,289","floor_id":19},{"din_category":"hnf","polygon":"407,326,373,326,373,327,407,327,433,327,433,342,433,348,434,348,434,343,469,343,469,404,467,404,467,405,465,405,465,408,401,408,401,405,399,405,399,404,395,404,395,405,393,405,393,408,317,408,317,405,315,405,315,404,314,404,314,342,313,342,313,404,311,404,311,405,309,405,309,408,266,408,266,401,266,393,266,341,266,333,266,272,311,272,311,277,315,277,315,272,371,272,371,277,375,277,375,272,407,272","floor_id":19},{"din_category":"hnf","polygon":"431,312,419,312,419,313,431,313,431,324,409,324,409,313,410,313,410,312,409,312,409,292,410,292,410,291,409,291,409,274,411,274,411,272,421,272,421,274,431,274,431,291,419,291,419,292,431,292","floor_id":19},{"din_category":"hnf","polygon":"457,306,456,306,456,307,457,307,457,324,447,324,447,307,448,307,448,306,445,306,445,307,446,307,446,324,435,324,435,307,436,307,436,306,435,306,435,292,448,292,448,291,435,291,435,274,446,274,446,272,455,272,455,274,457,274,457,291,456,291,456,292,457,292","floor_id":19},{"din_category":"hnf","polygon":"459,332,459,341,459,342,434,342,434,327,459,327","floor_id":19},{"din_category":"hnf","polygon":"103,308,103,322,75,322,67,322,63,322,63,320,59,320,59,321,57,321,57,323,37,323,37,273,57,273,57,276,59,276,59,276,63,276,63,273,103,273,103,299","floor_id":19},{"din_category":"hnf","polygon":"103,370,60,370,60,326,63,326,63,324,63,324,63,323,67,323,75,323,103,323","floor_id":19},{"din_category":"hnf","polygon":"121,408,77,408,77,405,75,405,75,404,71,404,71,405,69,405,69,408,60,408,60,398,63,398,63,396,63,396,63,392,63,392,63,390,60,390,60,371,110,371,119,371,121,371","floor_id":19},{"din_category":"hnf","polygon":"167,326,167,331,167,340,167,341,165,341,150,341,121,341,121,370,119,370,110,370,104,370,104,308,104,299,104,273,108,273,134,273,143,273,143,276,147,276,147,273,147,272,167,272,167,289,167,322","floor_id":19},{"din_category":"hnf","polygon":"217,408,161,408,161,405,159,405,159,404,158,404,158,342,165,342,167,342,217,342","floor_id":19},{"din_category":"hnf","polygon":"193,341,168,341,168,340,168,331,168,326,193,326","floor_id":19},{"din_category":"hnf","polygon":"217,340,218,340,218,341,194,341,194,326,218,326,218,331,217,331","floor_id":19},{"din_category":"hnf","polygon":"265,272,265,341,219,341,219,326,220,326,220,272,251,272,251,277,255,277,255,272","floor_id":19},{"din_category":"nnf","polygon":"217,324,206,324,206,321,205,321,205,324,195,324,195,308,205,308,205,313,206,313,206,308,217,308","floor_id":19},{"din_category":"hnf","polygon":"191,324,182,324,182,321,181,321,181,324,169,324,169,322,169,308,181,308,181,313,182,313,182,308,191,308","floor_id":19},{"din_category":"hnf","polygon":"191,304,182,304,182,299,181,299,181,304,169,304,169,289,169,287,181,287,181,290,182,290,182,287,191,287","floor_id":19},{"din_category":"hnf","polygon":"217,304,206,304,206,299,205,299,205,304,195,304,195,287,205,287,205,290,206,290,206,287,217,287,217,289","floor_id":19},{"din_category":"hnf","polygon":"265,393,265,401,265,408,233,408,233,405,231,405,231,404,227,404,227,405,225,405,225,408,218,408,218,342,219,342,225,342,235,342,265,342","floor_id":19},{"din_category":"vf","polygon":"650,185,650,156,697,156,685,170,662,170,662,171,685,171,685,170,697,156,697,185","floor_id":19},{"din_category":"hnf","polygon":"757,59,757,130,757,167,732,167,724,167,724,164,720,164,720,167,720,183,700,183,700,153,700,153,700,151,700,119,700,114,698,114,698,109,698,87,698,33,705,33,705,36,707,36,707,36,711,36,711,36,713,36,713,33,757,33","floor_id":19},{"din_category":"hnf","polygon":"804,50,807,50,807,70,803,70,803,70,758,70,758,59,758,33,789,33,789,36,791,36,791,36,795,36,795,36,797,36,797,33,807,33,807,42,804,42,804,44,803,44,803,48,804,48","floor_id":19},{"din_category":"hnf","polygon":"807,114,804,114,804,116,803,116,803,118,758,118,758,71,803,71,807,71","floor_id":19},{"din_category":"hnf","polygon":"830,167,809,167,809,165,807,165,807,164,803,164,803,167,758,167,758,130,758,119,803,119,803,120,807,120,807,120,809,120,809,117,830,117","floor_id":19},{"din_category":"hnf","polygon":"373,79,362,79,338,79,338,33,373,33","floor_id":19},{"din_category":"hnf","polygon":"409,79,384,79,374,79,374,33,393,33,393,36,395,36,395,36,399,36,399,36,401,36,401,33,409,33","floor_id":19},{"din_category":"hnf","polygon":"481,169,480,169,460,169,460,169,460,114,410,114,410,95,410,85,410,33,465,33,465,36,467,36,467,36,471,36,471,36,473,36,473,33,481,33","floor_id":19},{"din_category":"hnf","polygon":"457,127,456,127,448,127,435,127,435,116,457,116","floor_id":19},{"din_category":"hnf","polygon":"457,148,456,148,448,148,435,148,435,128,448,128,456,128,457,128","floor_id":19},{"din_category":"hnf","polygon":"457,167,454,167,435,167,435,149,448,149,456,149,457,149","floor_id":19},{"din_category":"hnf","polygon":"431,167,413,167,409,167,409,149,410,149,419,149,431,149","floor_id":19},{"din_category":"hnf","polygon":"431,148,419,148,410,148,409,148,409,134,410,134,430,134,431,134","floor_id":19},{"din_category":"hnf","polygon":"431,133,430,133,421,133,421,116,431,116","floor_id":19},{"din_category":"hnf","polygon":"420,133,410,133,409,133,409,116,420,116","floor_id":19},{"din_category":"hnf","polygon":"157,404,155,404,155,405,153,405,153,408,122,408,122,342,150,342,157,342","floor_id":19},{"din_category":"hnf","polygon":"553,94,553,164,551,164,551,169,518,169,518,163,518,151,516,151,497,151,494,151,494,164,491,164,491,169,482,169,482,94,482,36,482,36,482,33,549,33,549,36,551,36,551,36,553,36","floor_id":19},{"din_category":"hnf","polygon":"517,163,517,163,517,169,516,169,496,169,495,169,495,164,495,152,497,152,516,152,517,152","floor_id":19},{"din_category":"hnf","polygon":"649,114,647,114,647,118,647,152,647,153,647,153,647,169,646,169,626,169,615,169,615,164,611,164,611,169,555,169,555,164,554,164,554,84,573,84,583,84,602,84,602,33,633,33,633,36,635,36,635,36,639,36,639,36,641,36,641,33,697,33,697,87,697,98,649,98,649,100,649,109","floor_id":19},{"din_category":"hnf","polygon":"601,83,583,83,573,83,554,83,554,36,555,36,555,36,557,36,557,33,601,33","floor_id":19},{"din_category":"hnf","polygon":"673,114,650,114,650,109,650,100,650,99,673,99","floor_id":19},{"din_category":"hnf","polygon":"697,109,697,114,674,114,674,99,697,99","floor_id":19},{"din_category":"hnf","polygon":"697,133,686,133,686,128,685,128,685,133,675,133,675,117,685,117,685,119,686,119,686,117,697,117,697,119","floor_id":19},{"din_category":"hnf","polygon":"697,151,697,153,686,153,686,151,685,151,685,153,675,153,675,137,685,137,685,142,686,142,686,137,697,137","floor_id":19},{"din_category":"hnf","polygon":"671,153,662,153,662,151,661,151,661,153,649,153,649,152,649,137,661,137,661,142,662,142,662,137,671,137","floor_id":19},{"din_category":"hnf","polygon":"671,133,662,133,662,128,661,128,661,133,649,133,649,118,649,117,661,117,661,119,662,119,662,117,671,117","floor_id":19},{"din_category":"hnf","polygon":"409,114,407,114,407,169,375,169,375,164,371,164,371,169,348,169,339,169,338,169,338,80,362,80,384,80,409,80,409,85,409,95","floor_id":19},{"din_category":"hnf","polygon":"337,118,289,118,279,118,278,118,278,112,278,97,278,33,309,33,309,36,311,36,311,36,315,36,315,36,317,36,317,33,337,33","floor_id":19},{"din_category":"hnf","polygon":"337,169,316,169,316,164,311,164,311,169,278,169,278,119,279,119,289,119,337,119","floor_id":19},{"din_category":"hnf","polygon":"277,169,256,169,256,164,251,164,251,169,241,169,220,169,220,151,220,151,220,141,220,141,220,128,220,128,220,118,220,118,220,114,218,114,218,108,218,100,218,98,218,33,225,33,225,36,227,36,227,36,231,36,231,36,233,36,233,33,277,33,277,97,277,112","floor_id":19},{"din_category":"hnf","polygon":"218,151,218,151,218,153,206,153,206,151,205,151,205,153,195,153,195,137,205,137,205,142,206,142,206,137,218,137,218,141,218,141","floor_id":19},{"din_category":"hnf","polygon":"218,128,218,128,218,133,206,133,206,128,205,128,205,133,195,133,195,116,205,116,205,119,206,119,206,116,218,116,218,118,218,118","floor_id":19},{"din_category":"hnf","polygon":"217,108,217,114,194,114,194,109,194,100,194,99,217,99,217,100","floor_id":19},{"din_category":"hnf","polygon":"191,153,182,153,182,151,181,151,181,153,169,153,169,151,170,151,170,141,169,141,169,137,181,137,181,142,182,142,182,137,191,137","floor_id":19},{"din_category":"hnf","polygon":"191,133,182,133,182,128,181,128,181,133,169,133,169,126,170,126,170,118,169,118,169,116,181,116,181,119,182,119,182,116,191,116","floor_id":19},{"din_category":"hnf","polygon":"193,109,193,114,170,114,170,99,170,99,193,99,193,100","floor_id":19},{"din_category":"hnf","polygon":"217,98,170,98,170,82,169,82,147,82,147,83,134,83,134,33,153,33,153,36,155,36,155,36,159,36,159,36,161,36,161,33,217,33","floor_id":19},{"din_category":"hnf","polygon":"167,114,167,118,167,118,167,126,167,126,167,136,147,136,147,118,147,95,137,95,127,95,121,95,121,84,123,84,132,84,147,84,169,84,169,99,167,99","floor_id":19},{"din_category":"hnf","polygon":"167,153,167,153,167,184,147,184,147,187,147,190,143,190,143,183,143,171,134,171,134,167,147,167,147,164,147,163,147,154,147,137,167,137,167,141,167,141,167,151,167,151","floor_id":19},{"din_category":"hnf","polygon":"146,154,146,163,146,164,143,164,143,167,134,167,108,167,89,167,89,134,89,125,89,119,104,119,113,119,146,119","floor_id":19},{"din_category":"hnf","polygon":"146,118,121,118,121,96,127,96,137,96,146,96","floor_id":19},{"din_category":"hnf","polygon":"88,167,63,167,63,164,59,164,59,164,57,164,57,166,37,166,37,117,57,117,57,120,59,120,59,120,63,120,63,119,88,119,88,125,88,134","floor_id":19},{"din_category":"hnf","polygon":"120,118,113,118,104,118,63,118,63,116,63,116,63,114,60,114,60,50,63,50,63,48,63,48,63,44,63,44,63,42,60,42,60,33,69,33,69,36,71,36,71,36,75,36,75,36,77,36,77,33,109,33,109,84,120,84","floor_id":19},{"din_category":"hnf","polygon":"133,83,132,83,123,83,110,83,110,33,133,33","floor_id":19},{"din_category":"hnf","polygon":"258,194,224,194,224,164,258,164","floor_id":22},{"din_category":"hnf","polygon":"293,194,259,194,259,164,293,164","floor_id":22},{"din_category":"hnf","polygon":"328,194,294,194,294,164,328,164","floor_id":22},{"din_category":"hnf","polygon":"363,194,329,194,329,164,363,164","floor_id":22},{"din_category":"hnf","polygon":"398,194,364,194,364,164,398,164","floor_id":22},{"din_category":"hnf","polygon":"433,194,399,194,399,164,433,164","floor_id":22},{"din_category":"hnf","polygon":"468,194,434,194,434,164,468,164","floor_id":22},{"din_category":"hnf","polygon":"503,194,469,194,469,164,503,164","floor_id":22},{"din_category":"hnf","polygon":"557,194,504,194,504,164,557,164","floor_id":22},{"din_category":"hnf","polygon":"571,276,501,276,501,220,545,220,571,247","floor_id":22},{"din_category":"hnf","polygon":"500,276,473,276,473,220,500,220","floor_id":22},{"din_category":"hnf","polygon":"472,276,416,276,416,220,472,220","floor_id":22},{"din_category":"hnf","polygon":"415,276,396,276,396,220,398,220,415,220","floor_id":22},{"din_category":"hnf","polygon":"395,276,364,276,364,220,395,220","floor_id":22},{"din_category":"hnf","polygon":"363,276,336,276,336,220,363,220","floor_id":22},{"din_category":"hnf","polygon":"335,276,308,276,308,220,335,220","floor_id":22},{"din_category":"hnf","polygon":"307,276,280,276,280,220,307,220","floor_id":22},{"din_category":"hnf","polygon":"279,276,252,276,252,220,279,220","floor_id":22},{"din_category":"hnf","polygon":"251,276,224,276,224,220,251,220","floor_id":22},{"din_category":"hnf","polygon":"611,276,572,276,572,247,611,247","floor_id":22},{"din_category":"hnf","polygon":"160,113,266,113,266,168,265,168,255,168,234,168,234,148,224,148,215,148,207,148,207,185,160,185","floor_id":21},{"din_category":"hnf","polygon":"454,185,442,185,442,247,454,247","floor_id":21},{"din_category":"vf","polygon":"239,170,239,169,255,169,265,169,292,169,302,169,352,169,362,169,400,169,411,169,443,169,453,169,485,169,496,169,534,169,544,169,572,169,582,169,634,169,637,166,644,158,647,155,647,137,649,137,658,137,682,137,704,137,713,137,714,137,714,138,714,147,714,148,662,148,662,167,666,167,666,178,662,178,662,185,454,185,442,185,239,185,239,181","floor_id":21},{"din_category":"hnf","polygon":"569,113,647,113,647,114,646,114,646,155,643,158,636,165,633,168,610,168,609,168,582,168,572,168,569,168","floor_id":21},{"din_category":"hnf","polygon":"509,113,568,113,568,168,544,168,534,168,509,168","floor_id":21},{"din_category":"hnf","polygon":"473,113,508,113,508,168,496,168,485,168,473,168","floor_id":21},{"din_category":"hnf","polygon":"424,113,472,113,472,168,453,168,443,168,424,168","floor_id":21},{"din_category":"hnf","polygon":"388,113,423,113,423,168,411,168,400,168,388,168","floor_id":21},{"din_category":"hnf","polygon":"328,113,387,113,387,168,362,168,352,168,328,168","floor_id":21},{"din_category":"hnf","polygon":"267,113,327,113,327,168,302,168,292,168,267,168","floor_id":21},{"din_category":"hnf","polygon":"688,113,647,113,647,136,688,136","floor_id":21},{"din_category":"nnf","polygon":"692,113,714,113,714,136,692,136","floor_id":21},{"din_category":"vf","polygon":"713,180,666,180,666,152,713,152","floor_id":21},{"din_category":"hnf","polygon":"736,150,717,150,717,185,736,185","floor_id":21},{"din_category":"nnf","polygon":"734,113,715,113,715,148,734,148","floor_id":21},{"din_category":"hnf","polygon":"250,318,327,318,327,264,263,264,250,277","floor_id":21},{"din_category":"vf","polygon":"234,265,234,283,182,283,182,285,182,294,182,295,183,295,192,295,214,295,238,295,247,295,249,295,249,277,252,273,259,266,262,263,657,263,657,247,262,247,234,247,234,249,234,253","floor_id":21},{"din_category":"hnf","polygon":"630,318,738,318,738,247,689,247,689,249,689,284,681,284,672,284,662,284,662,264,641,264,631,264,630,264,630,269,630,271","floor_id":21},{"din_category":"hnf","polygon":"629,264,569,264,569,318,629,318","floor_id":21},{"din_category":"hnf","polygon":"568,264,509,264,509,318,568,318","floor_id":21},{"din_category":"hnf","polygon":"508,264,473,264,473,318,508,318","floor_id":21},{"din_category":"hnf","polygon":"208,318,249,318,249,301,247,301,247,296,208,296","floor_id":21},{"din_category":"hnf","polygon":"472,264,424,264,424,318,472,318","floor_id":21},{"din_category":"hnf","polygon":"423,264,388,264,388,318,423,318","floor_id":21},{"din_category":"nnf","polygon":"204,296,182,296,182,318,204,318","floor_id":21},{"din_category":"nnf","polygon":"181,283,162,283,162,318,181,318","floor_id":21},{"din_category":"hnf","polygon":"180,282,158,282,158,247,180,247","floor_id":21},{"din_category":"vf","polygon":"230,252,183,252,183,280,230,280","floor_id":21},{"din_category":"hnf","polygon":"387,264,328,264,328,318,387,318","floor_id":21}]}

  // Closed Line from 3D Points
  // Three.js r.51 (Updated for r.52)

  // WestLangley

  var camera, scene, renderer, controls;

  var content = document.getElementById("content");
  var spacer = document.getElementById("spacer");

  // dom
  var container = document.createElement('div');
  container.style.position="absolute"
  container.style.top=0
  container.style.left=0
  container.style.zIndex = 5
  document.body.appendChild(container);

  // renderer
  renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor( 0xffffff, 1);

  container.appendChild(renderer.domElement);

  // scene
  scene = new THREE.Scene();
  scene.fog = new THREE.Fog(0xffffff, 500, 1700);

  // camera
  camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000);
  scene.add(camera);


  // controls
  //controls = new THREE.OrbitControls( camera );
  //controls.target.x = 400
  //controls.target.z = 300
  //controls.target.y = 0


  // material
  var material = new THREE.LineBasicMaterial({
      color: 0x000000,
      linewidth: 1,
      transparent: true,
      opacity: 0
  });

  // material
  var thinMaterial = new THREE.LineBasicMaterial({
      //color: 0xaaaaaa,
      color: 0x666666,
      linewidth: 1,
      transparent: true,
      opacity: 0
  });

  // mesh face materials
  var materialFront = new THREE.MeshBasicMaterial( { color: 0x1B325F, transparent: true, opacity: 0.75 } );
  var materialSide = new THREE.MeshBasicMaterial( { color: 0x3A89C9, transparent: true, opacity: 0 } );
  var materialArray = [ materialFront, materialSide ];
  var starMaterial = new THREE.MeshFaceMaterial(materialArray);

  function addPoly(poly, parent, flat) {
    var prismD = flat ? 0 : 40;

    var targetScene = new THREE.Object3D();
    // geometry
    var geometry = new THREE.Geometry();
    // line
    var line = new THREE.Line(geometry, material);
    targetScene.add(line);

    var line = new THREE.Line(geometry, material);
    line.position.set(0, 0, prismD);
    targetScene.add(line);

    var xMax = 0
    var yMax = 0

    var xMin = 99999999
    var yMin = 99999999

    function addPoint(x, y) {
        geometry.vertices.push(new THREE.Vector3(x, y, 0));

        var connGeometry = new THREE.Geometry();

        connGeometry.vertices.push(new THREE.Vector3(0, 0, 0));
        connGeometry.vertices.push(new THREE.Vector3(0, 0, prismD));

        var connLine = new THREE.Line(connGeometry, thinMaterial);
        connLine.position.set(x, y, 0);
        targetScene.add(connLine);

        // add mesh point
        points.push(new THREE.Vector2(x, y));

        if(x > xMax) xMax = x;
        if(y > yMax) yMax = y;
        if(x < xMin) xMin = x;
        if(y < yMin) yMin = y;
    }

    var points = [];

    var coords = poly.split(",");
    for(var i = 0; i < coords.length; i += 2) {
      if(coords[i] != coords[i-2] || coords[i+1] != coords[i-1])
        addPoint(parseInt(coords[i]), parseInt(coords[i+1]))
    }

    var starShape = new THREE.Shape( points );

    var extrusionSettings = {
      size: 0, amount: prismD, curveSegments: 0,
      bevelThickness: 1, bevelSize: 2, bevelEnabled: false,
      material: 0, extrudeMaterial: 1
    };

    var centerX = xMin + (xMax - xMin) / 2
    var centerY = yMin + (yMax - yMin) / 2
    var sizeX = xMax - xMin
    var sizeY = yMax - yMin

    var starGeometry = new THREE.ExtrudeGeometry( starShape, extrusionSettings );

    var star = new THREE.Mesh( starGeometry, starMaterial );
    targetScene.add(star);

    var hin   = new THREE.Matrix4().makeTranslation(-centerX, -centerY, -prismD/2)
    var her   = new THREE.Matrix4().makeTranslation(centerX, centerY, prismD/2)
    var spacing = 3
    var scale = 1 - spacing/( (sizeX + sizeY) / 2 )
    var klein = new THREE.Matrix4().makeScale(scale, scale, scale)

    targetScene.matrix = new THREE.Matrix4().multiply(her).multiply(klein).multiply(hin);
    targetScene.matrixAutoUpdate = false;

    parent.add(targetScene);
  }

  var ug = new THREE.Object3D();
  var eg = new THREE.Object3D();
  var og1 = new THREE.Object3D();
  var og2 = new THREE.Object3D();

  data.rooms.forEach(function(room) {
    var floor;

    if(room.floor_id == 19)
      floor = eg;
    if(room.floor_id == 20)
      floor = og1;
    if(room.floor_id == 21)
      floor = og2;
    if(room.floor_id == 22)
      return;
      //floor = ug;

    addPoly(room.polygon, floor, room.din_category!="hnf")
    if(room.floor_id == 20)
      addPoly(room.polygon, ug, room.din_category!="hnf")
  })

  scene.add(ug)
  scene.add(eg)
  scene.add(og1)
  scene.add(og2)

  // axes
  //scene.add(new THREE.AxisHelper(100));

  // render
  function render() {

      renderer.render(scene, camera);

  }

  var director

  var lookAt = new THREE.Vector3(435, 200, 0)


      camera.position = new THREE.Vector3(lookAt.x, lookAt.y, 800);
      eg.traverse( function ( object ) { object.renderDepth = 1; } );
      ug.traverse( function ( object ) { object.renderDepth = 1; } );

      camera.lookAt(lookAt);
      og1.position.z = 100


        var planeW = 50; // pixels
  var planeH = 50; // pixels
  var numW = 100; // how many wide (50*50 = 2500 pixels wide)
  var numH = 100; // how many tall (50*50 = 2500 pixels tall)
  var gridMaterial = new THREE.MeshBasicMaterial( { color: 0xCCCCCC, wireframe: true, transparent: true })
  var plane = new THREE.Mesh( new THREE.PlaneGeometry( planeW*numW, planeH*numH, numW*2, numH*2 ), gridMaterial);
  plane.position.z = og1.position.z - 5
  scene.add(plane);


  // animate

  var running = true
  var rendering = true

  function animate(t) {
      if(running)
        requestAnimationFrame(animate);
      t = t || 0

  /*
      camera.position.x = Math.round(500 + Math.sin(t/1000)*700)
      camera.position.y = Math.round(300 + Math.sin(t/1000)*150)
      camera.position.z = Math.round(650 + Math.sin(t/2000)*450)

      spacing = Math.abs(Math.sin(t/2500))

      ug.position.z = -50 + -300*spacing
      eg.position.z = 0
      og1.position.z = 50 +300*spacing
      og2.position.z = 100 +600*spacing

      camera.lookAt(lookAt);
  */
      //controls.update();

      director.update();

      if(rendering)
        render();

  }
  var lol = {}
  eg.position.z = 99999
  ug.position.z = 99999
  og2.position.z = 1000
  //camera.position.
  blackout = document.getElementById("blackout")
  director = new THREE.Director();
  director
  .addAction(0, function() {
    document.getElementById("music").play()
  })
  .addTween(0, 10, lol, {z:-2000}, {z:0}, 'cubicInOut', function(k) {
    blackout.style.opacity = 1-k;
  })
  .addAction(14, function() {
    blackout.parentNode.removeChild(blackout)
  })
  .addAction(12, function() {
    eg.position.z = - 2000
    ug.position.z = - 3500
  })

  .addTween(8,4, material, {opacity: 0}, {opacity: 1}, 'linear')
  .addTween(9,4, thinMaterial, {opacity: 0}, {opacity: 1}, 'linear')
  .addTween(10,4, materialSide, {opacity: 0}, {opacity: 0.3}, 'linear')

  .addTween(10, 15, eg.position, {z:-2000}, {z:0}, 'cubicInOut')
  .addTween(10, 15, ug.position, {z:-3500}, {z:-100}, 'cubicInOut')
  //.addTween(0, 5, ug.position, {z:-800}, {z:-50}, 'cubicInOut')
  .addTween(10, 15, og2.position, {z:1000}, {z:200}, 'cubicInOut')
  .addTween(10, 15, camera.position, {y:camera.position.y}, {y:-650,z:400}, 'cubicInOut')
  .addTween(10, 15, lookAt, {z:lookAt.z}, {z:lookAt.z+10}, 'cubicInOut', function() {
    camera.lookAt(lookAt)
  })

  .addTween(17,5, gridMaterial, {opacity: 1}, {opacity: 0}, 'linear')

  // fanout for the floors
  /*.addTween(25, 0.5, og2.rotation, {z: 0}, {z:Math.PI*2/30*3}, 'cubicInOut')
  .addTween(25, 0.5, og1.rotation, {z: 0}, {z:Math.PI*2/30*2}, 'cubicInOut')
  .addTween(25, 0.5, eg.rotation, {z: 0}, {z:Math.PI*2/30*1}, 'cubicInOut')
  .addTween(25, 0.5, ug.rotation, {z: 0}, {z:Math.PI*2/30*0}, 'cubicInOut')

  .addTween(27, 0.5, og2.rotation, {z:Math.PI*2/30*3}, {z: 0}, 'cubicInOut')
  .addTween(27, 0.5, og1.rotation, {z:Math.PI*2/30*2}, {z: 0}, 'cubicInOut')
  .addTween(27, 0.5, eg.rotation, {z:Math.PI*2/30*1}, {z: 0}, 'cubicInOut')
  .addTween(27, 0.5, ug.rotation, {z:Math.PI*2/30*0}, {z: 0}, 'cubicInOut')*/

  .addTween(21,4, material, {opacity: 1}, {opacity: 0}, 'linear')
  .addTween(21,4, thinMaterial, {opacity: 1}, {opacity: 0}, 'linear')


  .addAction(26, function() {
    rendering = false
  })
  .addAction(26.5, function() {
    content.classList.remove("out")
    spacer.classList.remove("out")
  })
  .addAction(27, function() {
    running = false
  })

  animate();
  director.start()
  //director.goto(30)
</script>
